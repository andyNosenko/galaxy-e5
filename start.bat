@echo off
setlocal

echo   _______  _______  _______  __      ____    ____
echo  /  _____||   ____||   ____||  |     \   \  /   /
echo |  |  __  |  |__   |  |__   |  |      \   \/   /
echo |  | |_ | |   __|  |   __|  |  |       \_    _/
echo |  |__| | |  |____ |  |____ |  `----.    |  |
echo  \______| |_______||_______||_______|    |__|

echo   _______      ___       __          ___      ___   ___ ____    ____
echo  /  _____|    /   \     |  |        /   \     \  \ /  / \   \  /   /
echo |  |  __     /  ^  \    |  |       /  ^  \     \  V  /   \   \/   /
echo |  | |_ |   /  /_\  \   |  |      /  /_\  \     >   <     \_    _/
echo |  |__| |  /  _____  \  |  `----./  _____  \   /  .  \      |  |
echo  \______| /__/     \__\ |_______/__/     \__\ /__/ \__\     |__|

echo  _______  _____
echo |   ____|| ____|
echo |  |__   | |__
echo |   __|  |___ \
echo |  |____  ___) |
echo |_______||____/



echo                                                                                                          +++++==+*#%%#%%%%%%%%%%%%#*+*****++++++******+++=
echo                                                                                               +++============--------------------==----===++++++++++====--===++++==
echo                                                                                            ++=---====+++***######**++++++++====+=::=++#%%%%%%%%%%%%%%%###%##**+=---====
echo                                                                                         =+##%%%%%%%%%%%%%##******++**********#+-:-+#%%%%%%%%%%##%%%%%%%%%%%%%%####*==----=+
echo                                                                                      =+#%%%%%#**+++*#*********+=======+**####=::=*%%%%%%%%%%%%%%#%%%%%%%%%%%%#%######+---=%*
echo                                                                                   =+#%%%%%#*+++++===********+*+++++==+#+####-:-+#%%%%%%%%%%%%%%################%####%#*==-=##
echo                                                                                 =*#%%%%#*+++++=====******+==+#######+*++##*-:-=#%%%%%%%%%#%%%%%################%%####%%#*=--+#*
echo                                                                              -=*%%%%#*+++++=======****##*===*########*=+%*-:-+**%%##%%%%##%%%%%#%%%#####%%%%%%%#%######%#*=--=*#
echo                                                                        ==---=#%%%%#+++++=========*######===+#########+=++::=*##=::::::-=+#%%%%%%%%%%####%%######%########*=----=*
echo                                                                       ===:=#%%%%*+++++=====++++++######*++++*#%####%%##+::=#@%-....::-=+*####%%%%%%%%#*#########%%####*=--------=+
echo                                                                       #++#%%%%%+++++=====+*===+**##########%%%%%%%%%%%+::=*@@%+++**##%@@@##########********++++++===------------====
echo                                                                   -----***+++++++++=================++++++++*******##=::-+****#####***+=------------------------------------------====
echo                                                      -----------------------------------------==--------------------------------==++****+=----------------------------------------==**+
echo                                                 ---------------------------------------------:::::-::--------------------------------=====------------------------------------------=*+
echo                                             +=------------------------------------:::::::::--====+-::::::::--------------------:::::::::::::::-----::::::::::::::::::----::---------==++
echo                                            =*+=------------:::::::::::::::::::::---=+*####*+*****-:::::::::--------------:--:-----------------------------------------:::::::-------==++
echo                                           ***+*+------------::::::::-===++**###***###%########+-::::::::::-------------::------------=========================---------::--=++++=---==++
echo                                         -=+===------:::::::::::::::::::-+++++++++++=-======+::::::::::::-=*####%%%%*=---------=================================---------=#########+===++
echo                                        ======-----------::::::::::::::::::................::::::::::::-=##%%%%@@@%%%%#+--======================================-------=+##%%@@@@@%#*====
echo                                       **+++==========****----------::::::::...............::::::::::--#%%@@@@@@@@@@@@%%*========++=======================------------=*%%@@@@@@@@@@%*===+
echo                                       +***+++========++++-------------:::::::::::::::::--+=::----::-=#%%@@@@@@@@@@@@@@@%*======++===============--------------------=+#%@@%%%%@@@@@@%+++*
echo                                       +#**++++==========---------------:::::::::::::::-:::*--------=#%@@@%%%%%%%%@@@@@@@%+=====+=======-------------------------=====#%@%%%%%%%%@@@@%*+**
echo                                        #%#*+++============--------------::::::--------=*::++-------*%@@%#%%%@%%%@@%@@@@@%#====++==--------------------------=+++++==+%@%#%#==%#%%@@@@#+*#
echo                                        *@#*++==####################*----:::::----------#::-+------+%@@%#%%@+-=%%#+@%@@@@@%++=++=-----------------------=+++++++++===#@%#%*-=#@#=*%@@@%+*#
echo                                        +*=++===#####################---::::::::::::::::==::++----=#%@%#%%#-:=#%@%=+%%@@@@%*+++=----------------===+++++++++++++++==+%%#%%%#%#%@#+#@@%%**#
echo                                        +==-----####**###############::::::::::::::::::::-::=*----+%%@*#%@##+%#@@@*++@@@@@@#++==========++++++++++++++++++++++++++==*@##%%@@@%@%#%%%@%**##
echo                                       *+=+++***#####################--:::::...............:=#---=*%@%*%@#%#@@%@@@%%#%%@@@%#++++====++++++++++++++++++++++++++++====#@##%*#%@%@@@@@%+=*##
echo                                       *+*++#@@@@@@@@@@@@@@@@@@@@@@@@@@%-:++-..............=*----=#%@##%@+##@@@@#%@@@@@@@@@*++++====++===============---------====+++##%%+#@%%%#@%#%#%@@%
echo                                       *#++#@@@@@@@@@@@@@@@@@@@@@@@@@@@%%+::-++:.........:+*=----=#@@#%%%:#%#%**@@@@@@@@@%#=================+++***####%%%%%%%%%%#****%%%%**@@*%%@##%#
echo                                       +*+=+++++++*******####%%%%%%%%%%%%@%-..--=========--::----==*@%%%@-+%@@@@%#@#*#%@#=***##%%%%%%%%%%%%%%%%%%%%%%@@%%%%%%%%%%%%@@@%%%#%@%%@@%%%%
echo                                         %@@@@@@@@@@@@@@@@@%%%#####*****+++=++++************+******%@%%%@+=#@@*%@%##*%@@=**#%@@@@@@@@@@@@@@                      @@@@@@%%%%%%%#@@%%#
echo                                                @@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@%#####%@@%%@@%#@@%%@@@%##@@@@@@@@@@@@@@@                              @@@@@@@@%%#*#%%%@
echo                                                 @@@@@@@@@@@@@@@@@@@*                           @@@@@@@%@@@@%%%*%@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%@@
echo                                                  @@@@@@@@@@@@@@@@@@       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#***#@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
echo                                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
                                                             @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
                                                                                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

rem Получаем IP-адрес шлюза
set "ip="
for /f "tokens=2,3 delims={,}" %%a in ('"WMIC NICConfig where IPEnabled="True" get DefaultIPGateway /value | find "I" "') do if not defined ip set ip=%%~a

rem Подключаемся по Wi-Fi
echo Connecting to ADB over Wi-Fi at %ip%:7777...
adb connect %ip%:7777

if errorlevel 1 (
    echo Failed to connect to ADB. Please check your device and network settings.
    pause
    exit /b
)

:menu
cls
echo ==========================================
echo          ADB Script Menu
echo ==========================================
echo 1. Run adb_test.bat
echo 2. Run backupzip.bat
echo 3. Run backup.bat
echo 4. Run restorezip.bat
echo 5. Exit
echo ==========================================
set /p choice="Please select an option (1-4): "

if "%choice%"=="1" (
    call ../backup/adb_test.bat
) else if "%choice%"=="2" (
    call ../backup/backupzip.bat
) else if "%choice%"=="3" (
    call ..backup/backup.bat
) else if "%choice%"=="4" (
    call ..backup/restorezip.bat
) else if "%choice%"=="5" (
    echo Exiting...
    exit /b
) else (
    echo Invalid choice. Please select a valid option.
)

pause
goto menu
